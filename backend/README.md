# Backend

## Описание

Это backend-сервис для платформы Astro DeFi, реализованный на FastAPI. Он предоставляет API для взаимодействия с AI-агентом, который помогает пользователям с вопросами по займам, инвестициям и работе платформы.

## Основные зависимости

- `fastapi` — основной web-фреймворк
- `uvicorn` — ASGI сервер для запуска приложения
- `python-dotenv` — для работы с переменными окружения
- Зависимости из `../agent/requirements.txt` (AI-агент)

## Структура

- `src/main.py` — точка входа, инициализация FastAPI и агента
- `src/api/routes/agent/get_query.py` — роут для обработки запросов к агенту
- `src/api/schemas/query.py` — схема запроса
- `src/controllers/get_query_controller.py` — контроллер логики обработки запроса

## Запуск

1. Установите зависимости:
   ```bash
   cd backend
   pip install -r requirements.txt
   ```

2. Запустите сервер:
   ```bash
   uvicorn src.main:app --reload
   ```
   По умолчанию сервер будет доступен на `http://localhost:8000`.

## API

### POST `/agent/get_query`

**Описание:**  
Обрабатывает вопрос пользователя и возвращает ответ AI-агента.

**Тело запроса (JSON):**
```json
{
  "query": "Ваш вопрос",
  "messageHistory": "История сообщений в виде строки"
}
```

**Пример ответа:**
```json
{
  "received_query": "Ваш вопрос",
  "result": "Ответ агента"
}
```

## Примечания

- Для работы требуется корректная инициализация AI-агента (см. логи при запуске).
- CORS разрешён для всех источников (можно изменить в `main.py`).
